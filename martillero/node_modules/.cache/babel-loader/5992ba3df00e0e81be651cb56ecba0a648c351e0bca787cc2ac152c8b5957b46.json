{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\asus\\\\Desktop\\\\FinalRedes\\\\martillero\\\\src\\\\components\\\\custom\\\\Chart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler } from \"chart.js\";\nimport { socket } from \"../../config/socket\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler);\nconst Chart = _ref => {\n  _s();\n  let {\n    type,\n    array,\n    labels,\n    label\n  } = _ref;\n  const [sales, setSales] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [profit, profits] = useState(0);\n  const [dataArrived, setDataArrived] = useState(false);\n  useEffect(() => {\n    if (!dataArrived) {\n      function onSaleData(data) {\n        setSales(data);\n      }\n      function onProductsData(data) {\n        setProducts(data);\n      }\n      socket.emit(\"get_report\");\n      socket.on(\"post_report\", () => setDataArrived(true));\n      socket.on(\"post_sales\", data => onSaleData(data));\n      socket.on(\"products\", data => onProductsData(data));\n      return () => {\n        socket.off(\"post_report\", () => setDataArrived(true));\n        socket.off(\"post_sales\", data => onSaleData(data));\n        socket.off(\"products\", data => onProductsData(data));\n      };\n    }\n  }, [dataArrived]);\n  let finalLabels = [];\n  let finalData = [];\n  let monto = 0;\n  products.forEach(product => {\n    finalLabels.push(product.nombre_producto);\n    sales.forEach(sale => {\n      if (sale.id_producto === product.id_producto) monto = sale.monto;\n    });\n    finalData.push(monto);\n    monto = 0;\n  });\n  var dataSet = {\n    labels: finalLabels,\n    datasets: [{\n      label: \"Productos vendidos\",\n      data: finalData,\n      tension: 0.5,\n      fill: true,\n      borderColor: \"rgb(255,99,132)\",\n      backgroundColor: \"rgba(255,99,132,0.5)\",\n      pointRadius: 5,\n      pointBorderColor: \"rgba(255, 99,132)\",\n      pointBackgroundColor: \"rgba(255,99,132)\"\n    }]\n  };\n  var optionSet;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \" hover:cursor-pointer w-full h-full\",\n    children: /*#__PURE__*/_jsxDEV(Line, {\n      className: \" wf\",\n      data: dataSet,\n      options: optionSet\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n_s(Chart, \"McoCUQfcN2gU3NbMgmG3ld7D9wE=\");\n_c = Chart;\nexport default Chart;\nvar _c;\n$RefreshReg$(_c, \"Chart\");","map":{"version":3,"names":["React","useEffect","useState","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Filler","socket","jsxDEV","_jsxDEV","register","_ref","_s","type","array","labels","label","sales","setSales","products","setProducts","profit","profits","dataArrived","setDataArrived","onSaleData","data","onProductsData","emit","on","off","finalLabels","finalData","monto","forEach","product","push","nombre_producto","sale","id_producto","dataSet","datasets","tension","fill","borderColor","backgroundColor","pointRadius","pointBorderColor","pointBackgroundColor","optionSet","className","children","options","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/asus/Desktop/FinalRedes/martillero/src/components/custom/Chart.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  Filler,\r\n} from \"chart.js\";\r\nimport { socket } from \"../../config/socket\";\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  Filler\r\n);\r\n\r\nconst Chart = ({ type, array, labels, label }) => {\r\n  const [sales, setSales] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [profit, profits] = useState(0);\r\n  const [dataArrived, setDataArrived] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!dataArrived) {\r\n      function onSaleData(data) {\r\n        setSales(data);\r\n      }\r\n\r\n      function onProductsData(data) {\r\n        setProducts(data);\r\n      }\r\n\r\n      socket.emit(\"get_report\");\r\n      socket.on(\"post_report\", () => setDataArrived(true));\r\n      socket.on(\"post_sales\", (data) => onSaleData(data));\r\n      socket.on(\"products\", (data) => onProductsData(data));\r\n\r\n      return () => {\r\n        socket.off(\"post_report\", () => setDataArrived(true));\r\n        socket.off(\"post_sales\", (data) => onSaleData(data));\r\n        socket.off(\"products\", (data) => onProductsData(data));\r\n      };\r\n    }\r\n  }, [dataArrived]);\r\n\r\n  let finalLabels = [];\r\n  let finalData = [];\r\n  let monto = 0;\r\n  products.forEach((product) => {\r\n    finalLabels.push(product.nombre_producto);\r\n    sales.forEach((sale) => {\r\n      if (sale.id_producto === product.id_producto) monto = sale.monto;\r\n    });\r\n    finalData.push(monto);\r\n    monto = 0;\r\n  });\r\n\r\n  var dataSet = {\r\n    labels: finalLabels,\r\n    datasets: [\r\n      {\r\n        label: \"Productos vendidos\",\r\n        data: finalData,\r\n        tension: 0.5,\r\n        fill: true,\r\n        borderColor: \"rgb(255,99,132)\",\r\n        backgroundColor: \"rgba(255,99,132,0.5)\",\r\n        pointRadius: 5,\r\n        pointBorderColor: \"rgba(255, 99,132)\",\r\n        pointBackgroundColor: \"rgba(255,99,132)\",\r\n      },\r\n    ],\r\n  };\r\n\r\n  var optionSet;\r\n  return (\r\n    <div className=\" hover:cursor-pointer w-full h-full\">\r\n      <Line className=\" wf\" data={dataSet} options={optionSet} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}