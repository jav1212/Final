{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\asus\\\\Desktop\\\\FinalRedes\\\\martillero\\\\src\\\\components\\\\custom\\\\Chart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler } from \"chart.js\";\nimport { socket } from \"../../config/socket\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler);\nconst Chart = _ref => {\n  _s();\n  let {\n    type,\n    array,\n    labels,\n    label\n  } = _ref;\n  const [sales, setSales] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [dataArrived, setDataArrived] = useState(false);\n  useEffect(() => {\n    if (!dataArrived) {\n      function onSaleData(data) {\n        setSales(data);\n      }\n      function onProductsData(data) {\n        setProducts(data);\n      }\n      socket.emit(\"get_report\");\n      socket.on(\"change_report\", () => setDataArrived(false));\n      socket.on(\"post_report\", () => setDataArrived(true));\n      socket.on(\"post_sales\", data => onSaleData(data));\n      socket.on(\"products\", data => onProductsData(data));\n      return () => {\n        socket.off(\"change_report\", () => setDataArrived(false));\n        socket.off(\"post_report\", () => setDataArrived(true));\n        socket.off(\"post_sales\", data => onSaleData(data));\n        socket.off(\"products\", data => onProductsData(data));\n      };\n    }\n  }, [dataArrived]);\n  let inicialData = [49.99, 399.99, 1399.0, 279.95, 2499.0, 799.0, 1599.99, 109.99, 799.0, 1799.99, 89.99, 799.99, 799.99, 499.99, 2899.0];\n  let finalLabels = [];\n  let finalDataProfits = [];\n  let finalData = [];\n  let monto = 0;\n  products.forEach(product => {\n    finalLabels.push(product.nombre_producto);\n    sales.forEach(sale => {\n      if (sale.id_producto === product.id_producto) monto = sale.monto;\n    });\n    finalData.push(monto);\n    finalDataProfits.push(monto + monto * 15 / 100);\n    monto = 0;\n  });\n  const data = {\n    labels: finalLabels,\n    datasets: [{\n      label: \"Vendidos\",\n      data: finalData,\n      tension: 0.5,\n      fill: false,\n      borderColor: \"rgb(231, 76, 60)\",\n      backgroundColor: \"rgba(231, 76, 60,0.5)\",\n      pointRadius: 10,\n      pointBorderColor: \"rgba(231, 76, 60)\",\n      pointBackgroundColor: \"rgba(231, 76, 60)\"\n    }, {\n      label: \"Ganancia\",\n      data: finalDataProfits,\n      tension: 0.5,\n      fill: false,\n      borderColor: \"rgb(41, 128, 185)\",\n      backgroundColor: \"rgba(41, 128, 185,0.5)\",\n      pointRadius: 5,\n      pointBorderColor: \"rgba(41, 128, 185)\",\n      pointBackgroundColor: \"rgba(41, 128, 185)\"\n    }, {\n      label: \"Precio incial\",\n      data: inicialData,\n      tension: 0.5,\n      fill: false,\n      borderColor: \"rgb(72, 201, 176 )\",\n      backgroundColor: \"rgba(72, 201, 176 ,0.5)\",\n      pointRadius: 5,\n      pointBorderColor: \"rgba(72, 201, 176 )\",\n      pointBackgroundColor: \"rgba(72, 201, 176 )\"\n    }]\n  };\n  const optionSet = {\n    responsive: true,\n    maintainAspectRatio: false,\n    scales: {\n      y: {\n        ticks: {\n          font: {\n            size: 16,\n            // Establece el tamaño de fuente a 16\n            color: \"#000000\" // Establece el color de fuente a negro\n          }\n        }\n      },\n\n      x: {\n        display: false // Oculta el eje x\n      }\n    },\n\n    elements: {\n      point: {\n        pointLabelFont: {\n          size: 16 // Establece el tamaño de fuente a 16 para la etiqueta del punto\n        }\n      }\n    },\n\n    plugins: {\n      legend: {\n        display: true,\n        position: \"bottom\",\n        labels: {\n          font: {\n            size: 20 // Establece el tamaño de fuente a 20\n          }\n        }\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \" hover:cursor-pointer w-full h-full flex justify-center items-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" m-5 graph-container w-full h-full\",\n      children: /*#__PURE__*/_jsxDEV(Line, {\n        data: data,\n        options: optionSet,\n        responsive: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n};\n_s(Chart, \"E20bCd+pZXmc/Csd7cCxyC4YmnQ=\");\n_c = Chart;\nexport default Chart;\nvar _c;\n$RefreshReg$(_c, \"Chart\");","map":{"version":3,"names":["React","useEffect","useState","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Filler","socket","jsxDEV","_jsxDEV","register","_ref","_s","type","array","labels","label","sales","setSales","products","setProducts","dataArrived","setDataArrived","onSaleData","data","onProductsData","emit","on","off","inicialData","finalLabels","finalDataProfits","finalData","monto","forEach","product","push","nombre_producto","sale","id_producto","datasets","tension","fill","borderColor","backgroundColor","pointRadius","pointBorderColor","pointBackgroundColor","optionSet","responsive","maintainAspectRatio","scales","y","ticks","font","size","color","x","display","elements","point","pointLabelFont","plugins","legend","position","className","children","options","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/asus/Desktop/FinalRedes/martillero/src/components/custom/Chart.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  Filler,\r\n} from \"chart.js\";\r\nimport { socket } from \"../../config/socket\";\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  Filler\r\n);\r\n\r\nconst Chart = ({ type, array, labels, label }) => {\r\n  const [sales, setSales] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const [dataArrived, setDataArrived] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!dataArrived) {\r\n      function onSaleData(data) {\r\n        setSales(data);\r\n      }\r\n\r\n      function onProductsData(data) {\r\n        setProducts(data);\r\n      }\r\n\r\n      socket.emit(\"get_report\");\r\n      socket.on(\"change_report\", () => setDataArrived(false));\r\n      socket.on(\"post_report\", () => setDataArrived(true));\r\n      socket.on(\"post_sales\", (data) => onSaleData(data));\r\n      socket.on(\"products\", (data) => onProductsData(data));\r\n\r\n      return () => {\r\n        socket.off(\"change_report\", () => setDataArrived(false));\r\n        socket.off(\"post_report\", () => setDataArrived(true));\r\n        socket.off(\"post_sales\", (data) => onSaleData(data));\r\n        socket.off(\"products\", (data) => onProductsData(data));\r\n      };\r\n    }\r\n  }, [dataArrived]);\r\n\r\n  let inicialData = [\r\n    49.99, 399.99, 1399.0, 279.95, 2499.0, 799.0, 1599.99, 109.99, 799.0,\r\n    1799.99, 89.99, 799.99, 799.99, 499.99, 2899.0,\r\n  ];\r\n  let finalLabels = [];\r\n  let finalDataProfits = [];\r\n  let finalData = [];\r\n  let monto = 0;\r\n  products.forEach((product) => {\r\n    finalLabels.push(product.nombre_producto);\r\n    sales.forEach((sale) => {\r\n      if (sale.id_producto === product.id_producto) monto = sale.monto;\r\n    });\r\n    finalData.push(monto);\r\n    finalDataProfits.push(monto + (monto * 15) / 100);\r\n    monto = 0;\r\n  });\r\n\r\n  const data = {\r\n    labels: finalLabels,\r\n    datasets: [\r\n      {\r\n        label: \"Vendidos\",\r\n        data: finalData,\r\n        tension: 0.5,\r\n        fill: false,\r\n        borderColor: \"rgb(231, 76, 60)\",\r\n        backgroundColor: \"rgba(231, 76, 60,0.5)\",\r\n        pointRadius: 10,\r\n        pointBorderColor: \"rgba(231, 76, 60)\",\r\n        pointBackgroundColor: \"rgba(231, 76, 60)\",\r\n      },\r\n      {\r\n        label: \"Ganancia\",\r\n        data: finalDataProfits,\r\n        tension: 0.5,\r\n        fill: false,\r\n        borderColor: \"rgb(41, 128, 185)\",\r\n        backgroundColor: \"rgba(41, 128, 185,0.5)\",\r\n        pointRadius: 5,\r\n        pointBorderColor: \"rgba(41, 128, 185)\",\r\n        pointBackgroundColor: \"rgba(41, 128, 185)\",\r\n      },\r\n      {\r\n        label: \"Precio incial\",\r\n        data: inicialData,\r\n        tension: 0.5,\r\n        fill: false,\r\n        borderColor: \"rgb(72, 201, 176 )\",\r\n        backgroundColor: \"rgba(72, 201, 176 ,0.5)\",\r\n        pointRadius: 5,\r\n        pointBorderColor: \"rgba(72, 201, 176 )\",\r\n        pointBackgroundColor: \"rgba(72, 201, 176 )\",\r\n      },\r\n    ],\r\n  };\r\n\r\n  const optionSet = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    scales: {\r\n      y: {\r\n        ticks: {\r\n          font: {\r\n            size: 16, // Establece el tamaño de fuente a 16\r\n            color: \"#000000\", // Establece el color de fuente a negro\r\n          },\r\n        },\r\n      },\r\n      x: {\r\n        display: false, // Oculta el eje x\r\n      },\r\n    },\r\n    elements: {\r\n      point: {\r\n        pointLabelFont: {\r\n          size: 16, // Establece el tamaño de fuente a 16 para la etiqueta del punto\r\n        },\r\n      },\r\n    },\r\n    plugins: {\r\n      legend: {\r\n        display: true,\r\n        position: \"bottom\",\r\n        labels: {\r\n          font: {\r\n            size: 20, // Establece el tamaño de fuente a 20\r\n          },\r\n        },\r\n      },\r\n    },\r\n  };\r\n  return (\r\n    <div className=\" hover:cursor-pointer w-full h-full flex justify-center items-center\">\r\n      <div className=\" m-5 graph-container w-full h-full\">\r\n        <Line data={data} options={optionSet} responsive={true} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}