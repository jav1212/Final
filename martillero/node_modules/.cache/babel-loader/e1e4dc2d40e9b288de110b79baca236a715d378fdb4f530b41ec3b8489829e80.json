{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\asus\\\\Desktop\\\\FinalRedes\\\\martillero\\\\src\\\\components\\\\custom\\\\Chart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler } from \"chart.js\";\nimport { socket } from \"../../config/socket\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler);\nconst Chart = _ref => {\n  _s();\n  let {\n    type,\n    array,\n    labels,\n    label\n  } = _ref;\n  const [sales, setSales] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [profit, profits] = useState(0);\n  const [dataArrived, setDataArrived] = useState(false);\n  useEffect(() => {\n    if (!dataArrived) {\n      function onSaleData(data) {\n        setSales(data);\n      }\n      function onProductsData(data) {\n        setProducts(data);\n      }\n      socket.emit(\"get_report\");\n      socket.on(\"post_report\", () => setDataArrived(true));\n      socket.on(\"post_sales\", data => onSaleData(data));\n      socket.on(\"products\", data => onProductsData(data));\n      return () => {\n        socket.off(\"post_report\", () => setDataArrived(true));\n        socket.off(\"post_sales\", data => onSaleData(data));\n        socket.off(\"products\", data => onProductsData(data));\n      };\n    }\n  }, [dataArrived]);\n  let finalLabels = [];\n  products.forEach(element => {\n    finalLabels.push(element.nombre_producto);\n    console.log(element);\n  });\n  var dataSet = {\n    labels: products.nombre_producto,\n    datasets: [{\n      label: \"Productos vendidos\",\n      data: sales.monto,\n      tension: 0.5,\n      fill: true,\n      borderColor: \"rgb(255,99,132)\",\n      backgroundColor: \"rgba(255,99,132,0.5)\",\n      pointRadius: 5,\n      pointBorderColor: \"rgba(255, 99,132)\",\n      pointBackgroundColor: \"rgba(255,99,132)\"\n    }]\n  };\n  var optionSet;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \" lg:w-3/5 xl:w-4/5 md:w-1/2\",\n    style: {\n      minWidth: \"60%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Line, {\n      data: dataSet,\n      options: optionSet\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), \";\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(Chart, \"McoCUQfcN2gU3NbMgmG3ld7D9wE=\");\n_c = Chart;\nexport default Chart;\nvar _c;\n$RefreshReg$(_c, \"Chart\");","map":{"version":3,"names":["React","useEffect","useState","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Filler","socket","jsxDEV","_jsxDEV","register","_ref","_s","type","array","labels","label","sales","setSales","products","setProducts","profit","profits","dataArrived","setDataArrived","onSaleData","data","onProductsData","emit","on","off","finalLabels","forEach","element","push","nombre_producto","console","log","dataSet","datasets","monto","tension","fill","borderColor","backgroundColor","pointRadius","pointBorderColor","pointBackgroundColor","optionSet","className","style","minWidth","children","options","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/asus/Desktop/FinalRedes/martillero/src/components/custom/Chart.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  Filler,\r\n} from \"chart.js\";\r\nimport { socket } from \"../../config/socket\";\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  Filler\r\n);\r\n\r\nconst Chart = ({ type, array, labels, label }) => {\r\n  const [sales, setSales] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [profit, profits] = useState(0);\r\n  const [dataArrived, setDataArrived] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!dataArrived) {\r\n      function onSaleData(data) {\r\n        setSales(data);\r\n      }\r\n\r\n      function onProductsData(data) {\r\n        setProducts(data);\r\n      }\r\n\r\n      socket.emit(\"get_report\");\r\n      socket.on(\"post_report\", () => setDataArrived(true));\r\n      socket.on(\"post_sales\", (data) => onSaleData(data));\r\n      socket.on(\"products\", (data) => onProductsData(data));\r\n\r\n      return () => {\r\n        socket.off(\"post_report\", () => setDataArrived(true));\r\n        socket.off(\"post_sales\", (data) => onSaleData(data));\r\n        socket.off(\"products\", (data) => onProductsData(data));\r\n      };\r\n    }\r\n  }, [dataArrived]);\r\n\r\n  let finalLabels = [];\r\n  products.forEach((element) => {\r\n    finalLabels.push(element.nombre_producto);\r\n    console.log(element);\r\n  });\r\n\r\n  var dataSet = {\r\n    labels: products.nombre_producto,\r\n    datasets: [\r\n      {\r\n        label: \"Productos vendidos\",\r\n        data: sales.monto,\r\n        tension: 0.5,\r\n        fill: true,\r\n        borderColor: \"rgb(255,99,132)\",\r\n        backgroundColor: \"rgba(255,99,132,0.5)\",\r\n        pointRadius: 5,\r\n        pointBorderColor: \"rgba(255, 99,132)\",\r\n        pointBackgroundColor: \"rgba(255,99,132)\",\r\n      },\r\n    ],\r\n  };\r\n\r\n  var optionSet;\r\n  return (\r\n    <div className=\" lg:w-3/5 xl:w-4/5 md:w-1/2\" style={{ minWidth: \"60%\" }}>\r\n      <Line data={dataSet} options={optionSet} />;\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}